# SLG 竞对数据监测系统 — 功能使用说明

本文档面向日常使用系统的同事，按页面逐项说明各功能如何操作，便于在钉钉等渠道分享。

---

## 一、系统概述

**SLG 竞对数据监测系统**用于监测 SLG 赛道竞品的数据与素材，主要能力包括：

- **公司维度**：按公司查看大盘数据、产品汇总与趋势。
- **产品维度**：按产品查看爆量产品地区数据、上线新游、单产品详情与趋势。
- **素材维度**：按产品查看广告创意与视频素材。
- **组合分析**：素材关键词占比/获量等分析。
- **数据底表**：查看产品总表、产品/公司归属表、标签表等原始表。
- **数据维护**（仅超级管理员）：上传 CSV/Excel，执行第一步、2.1/2.2 步拉取，更新归属表与新产品表。
- **用户管理**（仅超级管理员）：审批新用户、查看现有用户。
- **高级查询**（仅超级管理员）：对数据库执行 SQL，查看或导出数据。

**使用前**：在浏览器打开系统地址，先完成**登录**；未登录无法访问任何数据页面。

---

## 二、登录与注册

### 2.1 登录

- 打开系统首页会看到**登录框**。
- 输入**用户名**和**密码**，点击「登录」。
- 登录成功后进入系统，顶部显示当前用户名，右上角有「退出」。
- 登录态会保持一段时间（如 7 天），关闭浏览器后再打开若未过期可直接使用。

### 2.2 注册（新同事）

- 在登录框点击「注册」标签。
- 填写**用户名**（至少 2 位）、**密码**（至少 6 位）、**确认密码**，点击「注册」。
- 注册成功后账号处于**待审批**状态，需**超级管理员在「用户管理」中审批通过**后才能登录。
- 审批通过后，使用注册时的用户名和密码即可登录。

### 2.3 权限说明

- **普通用户**：可使用公司维度、产品维度、素材维度、组合分析、数据底表；**看不到**「数据维护」「用户管理」「高级查询」入口。
- **超级管理员**：在上述基础上，可进入「数据维护」上传数据、执行拉取，「用户管理」审批用户、查看现有用户，以及「高级查询」执行 SQL。

---

## 三、公司维度

**入口**：顶部导航「公司维度」。

### 3.1 左侧：选择周期

- 左侧栏按**年份**折叠（如 2026 年、2025 年），下面列出该年的**周标签**（如 0119-0125、0112-0118）。
- 点击某一周，主区数据会切换为该周。

### 3.2 子导航：大盘数据 / 详细数据

- **大盘数据**（默认）：展示该周**公司维度大盘表**，列包含公司归属、产品归属、当周周安装、周流水、周安装/流水变动等。支持：
  - **搜索**：在搜索框输入关键词筛选表格。
  - **下载表格**：导出当前表格为 Excel。
  - **下载数据监测表**：下载该周完整「SLG 数据监测表」Excel。
- 点击表格中「**公司归属**」列的公司名，会进入该公司在该周的**公司详细信息**页。

### 3.3 公司详细信息页

- 从大盘数据点击公司名后，会进入该公司详情。
- 页内包含：
  - **公司简介**：公司累计安装、赛道排名（安装）、公司累计流水、赛道排名（流水）。
  - **公司产品汇总表**：该公司下各产品的产品名、上线时间、最新周安装、周安装变动、最新周流水、周流水变动。
  - **公司数据趋势**：折线图（当周周安装）、堆叠柱状图（各产品当周周安装占额）。
  - **公司素材投放**：饼图/柱状图占位（若后端有数据会展示）。
- 子导航可切回「大盘数据」或继续看「详细数据」。

---

## 四、产品维度

**入口**：顶部导航「产品维度」。

### 4.1 左侧：选择周期

- 与公司维度相同，左侧选择**年份 + 周**，主区数据随所选周变化。
- **说明**：产品详情页的数据在切换周时**不会自动刷新**，需要时请点击详情页内的「**刷新**」按钮重新加载。

### 4.2 子导航：大盘数据 / 上线新游 / 详细数据

- **大盘数据**（默认）  
  - 标题为「xx年, xx, 爆量产品地区数据」。
  - 需先选择**产品表**：**SLG 爆量旧产品** 或 **SLG 爆量新产品**。
  - 表格展示该周、该产品表下的爆量产品及地区获量等。支持**搜索**、**下载表格**。
  - 点击表格中「**产品归属**」列的产品名，进入该产品的**产品详细信息**页。

- **上线新游**  
  - 展示本周**新上线/测试的 SLG 游戏**列表（来自新产品监测表）。支持搜索。

- **详细数据**  
  - 与「大盘数据」类似，也是进入产品列表后点击产品名查看详情；此处更强调「详细数据」视图。

### 4.3 产品详细信息页

- 从大盘数据或详细数据点击产品名后进入。
- 页内包含：
  - **产品简介**：公司归属、新/旧产品、上线时间、Unified ID（可复制）、题材标签、画风标签。
  - **拉取按钮**（管理员可见）：  
    - **拉取该产品 2.1 步**：按当前产品 Unified ID 与所选周，拉取该产品**分地区数据**（调用 Sensor Tower API，仅写 JSON 并同步 MySQL）。  
    - **拉取该产品 2.2 步**：按当前产品 Unified ID 与所选周，拉取该产品**创意数据**（同上，仅 JSON + MySQL）。  
  - **刷新**：点击后重新加载当前产品、当前周的详情数据（不随左侧切换周而自动刷新）。
  - **产品累计安装 / 赛道排名（安装）/ 产品累计流水 / 赛道排名（流水）**。
  - **产品数据趋势**：当周周安装折线图、各市场获量堆叠柱状图。
  - **产品素材投放**：饼图/柱状图（若有数据）；可「跳转详细」到素材维度。

---

## 五、素材维度

**入口**：顶部导航「素材维度」。

### 5.1 选择周期与产品

- 左侧选择**年份 + 周**。
- 主区需选择：
  - **产品表**：SLG 爆量旧产品 / SLG 爆量新产品。
  - **产品选择**：从下拉框选择具体产品（依赖该周、该产品表下已有创意数据）。

### 5.2 筛选与表格

- **地区筛选**：全部地区 / 亚洲 T1 / 欧美 T1 / T2 / T3。
- **持续时间**：全部 / 15 天以下 / 15～30 天 / 30 天以上。
- **视频比例**：全部 / 横屏 / 竖屏。
- 下方为**素材表格**（创意明细），支持**搜索**和**下载表格**。

---

## 六、组合分析

**入口**：顶部导航「组合分析」。

- 左侧选择**年份 + 周**后，主区展示该周的**素材关键词占比**（饼图）与**素材关键词获量情况**（柱状图）。
- 可切换「占比」/「获量」等维度（若有多个指标）。
- 若功能尚未开放，可能显示「功能开发中」。

---

## 七、数据底表

**入口**：顶部导航「数据底表」。

### 7.1 子导航（底表类型）

- **产品总表**：按周展示产品总表（metrics_total），列较多。会显示「当前周期：xx」，支持**搜索**和筛选。
- **产品归属表**：产品名、Unified ID、产品归属、题材、画风、发行商、公司归属等。
- **公司归属表**：发行商与公司归属对应。
- **新产品监测表**：上线新游来源表。
- **题材标签表 / 玩法标签表 / 画风标签表**：各类标签底表。

### 7.2 使用方式

- 左侧选择**年份 + 周**（产品总表按周展示；其他表多为全局，但界面可能仍带周选择）。
- 点击上方子导航切换不同底表，主区显示对应表格，支持**搜索**和查看。

---

## 八、数据维护（仅管理员可见）

**入口**：顶部导航「数据维护」。仅**超级管理员**或具备维护权限的账号可见此入口。

页面内为多个**功能卡片**，按需选择并填写表单后提交。

### 8.1 公司维度大盘数据（第一步）

- **作用**：上传该周的 **13 个 CSV**（如 0119-0125-action.csv、0119-0125-strategy.csv 等），执行流水线第一步，生成公司维度大盘数据、数据监测表、目标产品表等，并更新爆量产品等前端数据；若启用 MySQL，会同步写入数据库。
- **操作**：  
  1. 填写**年份**（如 2026）、**周标签**（如 0119-0125）。  
  2. 点击「选择 13 个 CSV 文件」，选中全部 13 个文件。  
  3. 点击「上传并执行第一步」。  
- 执行成功后，公司维度大盘、产品维度爆量产品、数据底表产品总表等会更新；可刷新页面或重新选周查看。

### 8.2 产品维度拉取目标产品分地区数据（2.1 步）

- **作用**：按选定周、目标产品（或单个 Unified ID），调用 Sensor Tower API 拉取**分地区数据**，仅写 JSON 并同步 MySQL，不写 xlsx。
- **操作**：  
  1. 填写**年份**、**周标签**。  
  2. **单产品拉取**：在「Unified ID」框填写该产品的 Unified ID，目标产品/新老产品/拉取数量可留空。  
  3. **批量拉取**：选择目标产品（策略/非策略）、新/老产品、拉取数量（如 top5、all），Unified ID 留空。  
  4. 点击「拉取并执行 2.1 步」。  
- 执行时间可能较长，完成后产品维度该周的爆量产品地区数据会更新。

### 8.3 素材维度拉取目标产品创意数据（2.2 步）

- **作用**：按选定周、目标产品（或单个 Unified ID），调用 Sensor Tower API 拉取**创意数据**，仅写 JSON 并同步 MySQL。
- **操作**：与 2.1 步类似，填写年份、周、Unified ID 或目标/新老/数量，点击「拉取并执行 2.2 步」。

### 8.4 产品/公司归属表更新

- **作用**：上传一张**产品归属表 Excel**（.xlsx），与现有 mapping 合并更新，用于后续数据监测表匹配与目标产品。
- **要求**：必填列包含产品名（实时更新中）、Unified ID、产品归属、题材、画风、发行商；公司归属可选（缺则按发行商从公司归属表补全）。
- **操作**：选择本地的 .xlsx 文件，点击「上传并更新归属表」。

### 8.5 新产品监测表

- **作用**：上传**新产品监测表 Excel**，保存到 newproducts/ 并生成 frontend/data/new_products.json，供【产品维度】-【上线新游】展示。
- **建议列**：产品名（实时更新中）、产品归属、题材、画风、发行商、公司归属、开测时间、是否下架等。
- **操作**：选择 .xlsx 文件，点击「上传并更新新产品监测表」。

---

## 九、用户管理（仅超级管理员可见）

**入口**：顶部导航「用户管理」。仅**超级管理员**可见。

### 9.1 左侧：待审批用户 / 现有用户

- **待审批用户**：注册后尚未审批通过的账号列表。可对每个用户点击「**通过**」，审批通过后该用户即可登录。
- **现有用户**：已审批通过、可登录的用户列表，展示用户名、角色、状态。  
- 需要最新列表时，可点击「刷新列表」。

---

## 十、高级查询（仅超级管理员可用）

**入口**：顶部导航「高级查询」。仅**超级管理员**可见此入口并可访问。

### 10.1 功能说明

- 在** SQL 输入框**中输入 SQL（如 SELECT、INSERT、UPDATE、DELETE），点击「**执行**」，结果在下方表格展示。
- 支持「**下载表格**」导出当前结果。
- 左侧为**数据库表列表**（若已启用 MySQL）：点击表名可查看表结构或部分数据，便于编写 SQL。

### 10.2 使用注意

- 仅支持当前已配置的数据库（如 MySQL）；若未启用数据库，高级查询可能不可用或仅部分可用。
- 执行写操作（INSERT/UPDATE/DELETE）会直接修改数据，请谨慎操作。

---

## 十一、常见问题简答

| 问题 | 说明 |
|------|------|
| 看不到「数据维护」「用户管理」「高级查询」 | 仅超级管理员可见上述入口，需用超级管理员账号登录。 |
| 注册后无法登录 | 注册后需超级管理员在「用户管理」-「待审批用户」中点击「通过」，通过后才能登录。 |
| 切换周后产品详情没变 | 产品详情页默认不随周自动刷新，请点击该页内的「刷新」按钮。 |
| 爆量产品没有数据 | 需先执行「第一步」生成目标产品与监测表，再执行 2.1 步拉取地区数据；若使用 MySQL，第一步和 2.1/2.2 步都会同步到库，前端从库读。 |
| 拉取 2.1/2.2 步很慢或失败 | 拉取依赖 Sensor Tower API 与服务器网络；API 为串行、有限额；若服务器无法访问外网会报错，需检查网络/代理。 |

---

## 十二、文档与支持

- 更多技术细节见项目内 `docs/` 下各文档（如登录与权限、数据表结构、第一步/第二步说明等）。
- 使用过程中若遇权限、数据不更新等问题，可联系系统管理员或查看上述常见问题。

---

*文档版本：随系统功能更新，以实际页面为准。*
