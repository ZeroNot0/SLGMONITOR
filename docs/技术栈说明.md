# 技术栈说明

本文档说明当前项目的技术栈与运行形态，聚焦本地与服务器两种典型使用场景。

---

## 1. 总体架构

- 数据处理：Python 脚本流水线（读取 CSV / Excel -> 生成 Excel / JSON）
- 前端展示：纯静态 HTML + CSS + JavaScript
- 资源服务：Python 内置 HTTP 服务（含静态与轻量 API）
- 数据存储（默认）：本地文件系统（Excel + JSON）
- 数据存储（可选）：MySQL（提供 schema 与迁移脚本）

---

## 2. 运行时与主要依赖

### 2.1 运行环境

- Python 3.x
- Windows / macOS / Linux 均可运行

### 2.2 主要 Python 依赖

- pandas：表格与数据处理
- openpyxl：Excel 读写
- pymysql：MySQL 连接（可选）

依赖声明：SLG Monitor 3.0/requirements.txt

---

## 3. 数据与脚本层

### 3.1 数据流水线

- 数据源：CSV + Excel
- 产出：Excel + JSON
- 关键脚本：SLG Monitor 3.0/scripts/*.py
- 一键入口：SLG Monitor 3.0/run_full_pipeline.py

### 3.2 前端数据生成

- JSON 生成脚本：SLG Monitor 3.0/frontend/*.py
- 目标：生成 frontend/data 下的静态 JSON

---

## 4. 前端技术

- HTML + CSS + JavaScript
- 无打包、无 Node.js
- 前端通过 fetch 读取本地 JSON 或 API

核心目录：SLG Monitor 3.0/frontend/

---

## 5. 服务层

- Python HTTP 服务（静态 + API）
- 启动入口：SLG Monitor 3.0/start_server.py
- 功能：
  - 前端静态资源服务
  - 登录 / 权限校验
  - 数据维护与文件下载接口
  - 数据底表查询接口

---

## 6. 数据库与可选后端模式

### 6.1 文件模式（默认）

- 前端读取：frontend/data/*.json
- 底表读取：mapping/*.xlsx 与 labels/*.xlsx
- 登录信息：deploy/auth_users.json

### 6.2 MySQL 模式（可选）

- MySQL schema：SLG Monitor 3.0/backend/db/schema.sql
- 迁移脚本：SLG Monitor 3.0/backend/db/migrate_data.py
- 连接配置：SLG Monitor 3.0/backend/db/config.py

开启方式：环境变量 USE_MYSQL=1

---

## 7. 外部 API（可选能力）

- Sensor Tower API
- Token：SLG Monitor 3.0/request/token.txt
- API 请求封装：SLG Monitor 3.0/request/api_request.py

分地区数据脚本：SLG Monitor 3.0/request/fetch_country_data.py
广告创意脚本：SLG Monitor 3.0/request/fetch_ad_creatives.py

---

## 8. 部署与运行形态

- 本地运行：python start_server.py
- 云端部署：Nginx 反代 + Python 服务（可选 systemd）
- Docker：deploy/Dockerfile

---

## 9. 适配 EXE 的可行性结论

- 当前前端是静态页面，后端是轻量服务，非常适合做 Windows EXE
- 最小改造思路：保留 Python 服务，外层增加桌面壳并打包
- 预计打包工具：PyInstaller 或 Nuitka
