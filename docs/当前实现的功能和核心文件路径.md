# 当前实现的功能和核心文件路径

本文档总结当前项目已实现的功能与对应的核心文件路径，方便梳理现状与后续重构。

---

## 1. 已实现功能总览

- 数据监测表流水线：step1 -> step5_5
- 目标产品生成：策略 / 非策略，旧 / 新
- 前端静态展示：公司维度、产品维度、素材维度、组合分析、数据底表
- 前端数据生成：监测表 JSON、目标产品 JSON、素材索引、周索引
- 静态资源服务 + 轻量 API（登录、维护、下载、底表查询）
- 账号与权限：管理员 / 普通用户
- 可选 MySQL 模式（已提供 schema 与迁移脚本）
- API 请求脚本骨架：分地区数据、广告创意

---

## 2. 数据监测表与目标产品流水线

### 2.1 入口与调度

- 一键流程入口：SLG Monitor 3.0/pipeline/run_full_pipeline.py
- 定时更新入口：SLG Monitor 3.0/pipeline/schedule_update.py

### 2.2 分步脚本

- Step 1 合并去重：SLG Monitor 3.0/pipeline/steps/step1_merge_clean.py
- Step 2 映射归属：SLG Monitor 3.0/pipeline/steps/step2_mapping.py
- Step 3 指标计算：SLG Monitor 3.0/pipeline/steps/step3_metrics.py
- Step 4 透视汇总：SLG Monitor 3.0/pipeline/steps/step4_pivot.py
- Step 5 报告生成：SLG Monitor 3.0/pipeline/steps/step5_final_report.py
- Step 5.5 箭头颜色：SLG Monitor 3.0/pipeline/steps/step5_5_fix_arrow_color.py

### 2.3 目标产品生成

- 目标产品脚本：SLG Monitor 3.0/pipeline/steps/generate_target.py
- 规则说明：SLG Monitor 3.0/docs/功能一_数据监测表与目标产品.md

### 2.4 输入 / 输出目录

- 原始 CSV：SLG Monitor 3.0/raw_csv/{year}/{week}/*.csv
- 中间表：SLG Monitor 3.0/intermediate/{year}/{week}/
- 监测表：SLG Monitor 3.0/output/{year}/{week}_SLG数据监测表.xlsx
- 目标产品：SLG Monitor 3.0/target/{year}/{week}/

---

## 3. 前端与前端数据生成

### 3.1 前端静态页面

- 页面入口：SLG Monitor 3.0/frontend/index.html
- 样式：SLG Monitor 3.0/frontend/css/
- 逻辑：SLG Monitor 3.0/frontend/js/

### 3.2 前端数据生成脚本

- 监测表转 JSON：SLG Monitor 3.0/frontend/convert_excel_with_format.py
- 目标产品转 JSON：SLG Monitor 3.0/frontend/convert_final_join_to_json.py
- 素材索引生成：SLG Monitor 3.0/frontend/build_creative_products_index.py
- 周索引生成：SLG Monitor 3.0/frontend/build_weeks_index.py
- 新游表转 JSON：SLG Monitor 3.0/frontend/convert_newproducts_to_json.py
- 产品映射转 JSON：SLG Monitor 3.0/frontend/convert_product_mapping_to_json.py
- 产品总表转 JSON：SLG Monitor 3.0/frontend/convert_metrics_to_json.py

### 3.3 前端数据目录

- 周索引：SLG Monitor 3.0/frontend/data/weeks_index.json
- 监测表 JSON：SLG Monitor 3.0/frontend/data/{year}/{week}_formatted.json
- 产品维度 JSON：SLG Monitor 3.0/frontend/data/{year}/{week}/product_strategy_old.json
- 素材索引 JSON：SLG Monitor 3.0/frontend/data/{year}/{week}/creative_products.json
- 新游 JSON：SLG Monitor 3.0/frontend/data/new_products.json

---

## 4. 静态服务与 API

### 4.1 服务入口

- 静态服务启动：SLG Monitor 3.0/server/start_server.py
- 启动脚本（含 MySQL）：SLG Monitor 3.0/start_with_mysql.sh

### 4.2 登录与权限

- 账号生成：SLG Monitor 3.0/deploy/create_admin.py
- 默认用户存储：SLG Monitor 3.0/deploy/auth_users.json
- 说明文档：SLG Monitor 3.0/docs/登录与权限说明.md

### 4.3 API 逻辑与数据库

- API 与查询封装：SLG Monitor 3.0/backend/db/
- 连接配置：SLG Monitor 3.0/backend/db/config.py
- MySQL 连接：SLG Monitor 3.0/backend/db/connection.py
- 数据迁移：SLG Monitor 3.0/backend/db/migrate_data.py
- 表结构：SLG Monitor 3.0/backend/db/schema.sql

---

## 5. 分地区数据与广告创意拉取

### 5.1 API 请求脚本

- 请求封装：SLG Monitor 3.0/request/api_request.py
- 分地区数据：SLG Monitor 3.0/request/fetch_country_data.py
- 广告创意数据：SLG Monitor 3.0/request/fetch_ad_creatives.py

### 5.2 相关目录

- Token：SLG Monitor 3.0/request/token.txt
- 地区数据：SLG Monitor 3.0/request/country_data/
- 广告创意：SLG Monitor 3.0/advertisements/

---

## 6. 数据底表与映射

- 产品归属表：SLG Monitor 3.0/mapping/产品归属.xlsx
- 公司归属表：SLG Monitor 3.0/mapping/公司归属.xlsx
- 市场 T 度：SLG Monitor 3.0/mapping/市场T度.csv
- 流水系数：SLG Monitor 3.0/mapping/流水系数.xlsx

- 标签表：SLG Monitor 3.0/labels/
- 新游表：SLG Monitor 3.0/newproducts/

---

## 7. 说明文档入口

- 项目概览：SLG Monitor 3.0/README.md
- 定期更新：SLG Monitor 3.0/README_SCHEDULE.md
- 功能说明：SLG Monitor 3.0/docs/SLG竞对数据监测系统-功能使用说明.md
- 数据表结构：SLG Monitor 3.0/docs/数据表与查询梳理及重构表结构.md
- MySQL 启用：SLG Monitor 3.0/docs/第二步_数据迁移与启用MySQL.md
- API 文档：SLG Monitor 3.0/docs/Sensor_Tower_API使用文档.md
